# üìã METODOLOGIA DE AVALIA√á√ÉO DO FRAMEWORK DE PRIVACIDADE E SEGURAN√áA DA INFORMA√á√ÉO

## üéØ **VIS√ÉO GERAL**

Este documento descreve a metodologia completa de avalia√ß√£o implementada no sistema FPSI, baseada no Guia do Framework oficial de Privacidade e Seguran√ßa da Informa√ß√£o. A metodologia abrange tr√™s dimens√µes principais: **N√≠vel de Implementa√ß√£o**, **N√≠vel de Capacidade** e **C√°lculo de Maturidade**.

---

## üìä **1. N√çVEIS DE IMPLEMENTA√á√ÉO**

O n√≠vel de implementa√ß√£o expressa uma an√°lise sobre a **amplitude de implementa√ß√£o** da respectiva medida, considerando a abrang√™ncia de ativos de informa√ß√£o que possuem aplicabilidade.

### **1.1 Diagn√≥sticos 2 e 3 (Escala de Maturidade)**

Para os diagn√≥sticos de Seguran√ßa da Informa√ß√£o e Privacidade, o avaliador deve selecionar um dos n√≠veis listados na **Tabela 2** para cada medida:

| **N√≠vel de Implementa√ß√£o** | **Pontua√ß√£o** | **Descri√ß√£o** |
|---------------------------|---------------|---------------|
| **Adota em maior parte ou totalmente** | 1 | H√° decis√£o formal ou plano aprovado, e a medida na organiza√ß√£o √© implementada integralmente em mais de 50% ou em todos os: ativos no caso de medida de seguran√ßa da informa√ß√£o; ou processos/servi√ßos no caso de medida de privacidade. |
| **Adota em menor parte** | 0,75 | H√° decis√£o formal ou plano aprovado, e a medida na organiza√ß√£o √© implementada integralmente em menos de 50% dos: ativos no caso de medida de seguran√ßa da informa√ß√£o; ou processos/servi√ßos no caso de medida de privacidade. |
| **Adota parcialmente** | 0,5 | H√° decis√£o formal ou plano aprovado, e a medida na organiza√ß√£o √© implementada parcialmente em mais de 50% ou em todos os: ativos no caso de medida de seguran√ßa da informa√ß√£o; ou processos/servi√ßos no caso de medida de privacidade. |
| **H√° decis√£o formal ou plano aprovado para implementar** | 0,25 | H√° decis√£o formal ou plano aprovado, por√©m n√£o h√° na organiza√ß√£o implementa√ß√£o ou est√° parcialmente implementado em menos de 50% dos: ativos no caso de medida de seguran√ßa da informa√ß√£o; ou processos/servi√ßos no caso de medida de privacidade. |
| **A organiza√ß√£o n√£o adota essa medida** | 0 | N√£o h√° qualquer decis√£o formal ou plano aprovado, tampouco implementa√ß√£o da medida. |
| **N√£o se aplica** | null | A medida n√£o se aplica em nenhum ativo no caso de medida de seguran√ßa da informa√ß√£o ou processo/servi√ßo no caso de medida de privacidade, por entendimento dos gestores ou considerando alguma particularidade do contexto de atua√ß√£o da organiza√ß√£o. A n√£o aplicabilidade dever√° seguir de uma motiva√ß√£o baseada em uma an√°lise de riscos. |

### **1.2 Diagn√≥stico 1 (Controle 0 - Estrutura B√°sica)**

Para o Controle 0 ‚Äì Estrutura B√°sica de Gest√£o em Seguran√ßa da Informa√ß√£o e Privacidade, os n√≠veis consistem numa resposta bin√°ria conforme **Tabela 3**:

| **N√≠vel de Implementa√ß√£o** | **Pontua√ß√£o** | **Descri√ß√£o** |
|---------------------------|---------------|---------------|
| **Sim** | 1 | O papel ou instrumento foi devidamente institu√≠do na organiza√ß√£o. |
| **N√£o** | 0 | O papel ou instrumento n√£o foi devidamente institu√≠do na organiza√ß√£o. |

---

## üèóÔ∏è **2. N√çVEIS DE CAPACIDADE**

Diferentemente do n√≠vel de implementa√ß√£o, que foca em aspectos **quantitativos**, o n√≠vel de capacidade foca no aspecto **qualitativo**, e tem como objetivo avaliar o n√≠vel de efetividade da adequa√ß√£o de um controle. A avalia√ß√£o √© realizada **por controle**, e n√£o por medida.

### **2.1 Tabela de N√≠veis de Capacidade (Tabela 4)**

| **N√≠vel** | **√çndice** | **Descri√ß√£o** |
|-----------|------------|---------------|
| **0** | 0 | Aus√™ncia de capacidade para a implementa√ß√£o das medidas do controle, ou desconhecimento sobre o atendimento das medidas. |
| **1** | 20 | O controle atinge mais ou menos seu objetivo, por meio da aplica√ß√£o de um conjunto incompleto de atividades que podem ser caracterizadas como iniciais ou intuitivas (pouco organizadas). |
| **2** | 40 | O controle atinge seu objetivo por meio da aplica√ß√£o de um conjunto b√°sico, por√©m completo, de atividades que podem ser caracterizadas como realizadas. |
| **3** | 60 | O controle atinge seu objetivo de forma muito mais organizada utilizando os recursos organizacionais. Al√©m disso, o controle √© formalizado por meio de uma pol√≠tica institucional, espec√≠fica ou como parte de outra maior. |
| **4** | 80 | O controle atinge seu objetivo, √© bem definido e suas medidas s√£o implementadas continuamente por meio de um processo decorrente da pol√≠tica formalizada. |
| **5** | 100 | O controle atinge seu objetivo, √© bem definido, suas medidas s√£o implementadas continuamente por meio de um processo e seu desempenho √© mensurado quantitativamente por meio de indicadores. |

---

## üßÆ **3. C√ÅLCULO DE MATURIDADE**

### **3.1 Maturidade por Controle (iMC)**

A maturidade √© obtida por meio da rela√ß√£o entre a avalia√ß√£o quantitativa e a qualitativa, considerando os n√≠veis de implementa√ß√£o atribu√≠dos √†s medidas e os n√≠veis de capacidade atribu√≠dos aos controles.

#### **F√≥rmula do Indicador de Maturidade por Controle:**

```
iMC = (‚àëPMC / (QMC - QMNAC)) / 2 * (1 + iNCC/100)
```

**Onde:**
- `iMC` = indicador de maturidade por controle
- `PMC` = somat√≥rio das pontua√ß√µes das medidas avaliadas no controle
- `QMC` = quantidade de medidas do controle
- `QMNAC` = quantidade de medidas n√£o aplic√°veis do controle
- `iNCC` = √≠ndice do n√≠vel de capacidade do controle

#### **Observa√ß√µes Importantes:**

1. **Divis√£o por 2**: A f√≥rmula divide o √≠ndice base por 2, resultando em scores mais conservadores
2. **Medidas n√£o respondidas**: S√£o consideradas como peso 0 no c√°lculo
3. **Medidas "N√£o se aplica"**: S√£o exclu√≠das tanto do numerador quanto do denominador
4. **Multiplicador INCC**: Amplifica a maturidade baseada na capacidade do controle

### **3.2 Classifica√ß√£o de Maturidade (Tabela 5)**

| **iMC** | **N√≠vel de Maturidade** |
|---------|------------------------|
| 0,00 a 0,29 | Inicial |
| 0,30 a 0,49 | B√°sico |
| 0,50 a 0,69 | Intermedi√°rio |
| 0,70 a 0,89 | Em Aprimoramento |
| 0,90 a 1,00 | Aprimorado |

### **3.3 Indicadores de Seguran√ßa (iSeg) e Privacidade (iPriv)**

#### **F√≥rmula de avalia√ß√£o do iSeg:**
```
iSeg = ((iMC‚ÇÄ √ó 4) + ‚àë·µ¢‚Çå‚ÇÅ¬π‚Å∏ iMC·µ¢) / 22
```

**Onde:**
- `iSeg` = indicador de maturidade de seguran√ßa da informa√ß√£o
- `i` = n√∫mero do controle avaliado, considerando os controles de 1 a 18 de Seguran√ßa
- `iMC` = indicador de maturidade por controle

#### **F√≥rmula de avalia√ß√£o do iPriv:**
```
iPriv = ((iMC‚ÇÄ √ó 4) + ‚àë·µ¢‚Çå‚ÇÅ‚Çâ¬≥¬π iMC·µ¢) / 17
```

**Onde:**
- `iPriv` = indicador de maturidade de privacidade
- `i` = n√∫mero do controle avaliado, considerando os controles de 19 a 31 de Privacidade
- `iMC` = indicador de maturidade por controle

#### **Peso do Controle 0:**

O **Controle 0 ‚Äì Estrutura B√°sica de Gest√£o** recebe peso 4 (quatro) nas f√≥rmulas devido √† sua import√¢ncia fundamental para a institui√ß√£o dos pap√©is e instrumentos em conformidade com a PNSI e com a LGPD. Este controle √© tratado separadamente dos demais controles, sendo essencial para a cultura organizacional quanto √†s duas tem√°ticas.

### **3.4 Classifica√ß√£o Final (Tabela 6)**

Tanto o iSeg quanto o iPriv utilizam os mesmos n√≠veis de maturidade:

| **iSeg / iPriv** | **N√≠vel de Maturidade** |
|------------------|------------------------|
| 0,00 a 0,29 | Inicial |
| 0,30 a 0,49 | B√°sico |
| 0,50 a 0,69 | Intermedi√°rio |
| 0,70 a 0,89 | Em Aprimoramento |
| 0,90 a 1,00 | Aprimorado |

---

## üíª **4. IMPLEMENTA√á√ÉO NO SISTEMA**

### **4.1 Arquivos Principais**

- **`src/lib/utils/calculations.ts`**: Cont√©m a implementa√ß√£o correta da f√≥rmula de maturidade
- **`src/lib/utils/maturity.ts`**: Utilit√°rios de c√°lculo e classifica√ß√£o de maturidade
- **`src/lib/utils/utils.ts`**: Constantes de respostas, INCC e maturidade

### **4.2 Fun√ß√£o Principal**

```typescript
export const calculateMaturityIndexForControle = (
  controle: Controle, 
  programaControle: ProgramaControle, 
  programaMedidas: ProgramaMedida[]
): string => {
  const sumOfResponses = calculateSumOfResponses(programaMedidas, controle.diagnostico);
  
  // Usar total de medidas (incluindo n√£o respondidas), excluindo apenas "N√£o se aplica"
  const totalMedidas = programaMedidas.filter((pm) => {
    if (pm.resposta === 6) return false; // Excluir "N√£o se aplica"
    return true; // Incluir todas as outras
  }).length;
  
  if (totalMedidas === 0) return "0.00";

  const baseIndex = sumOfResponses / totalMedidas;
  const inccLevel = incc.find((incc) => incc.id === programaControle.nivel);
  const inccMultiplier = 1 + ((inccLevel?.nivel || 0) * 1 / 5);
  
  const finalScore = (baseIndex / 2) * inccMultiplier;
  
  return finalScore.toFixed(2);
};
```

### **4.3 Caracter√≠sticas da Implementa√ß√£o**

1. **‚úÖ Conformidade com o Framework**: Implementa exatamente a f√≥rmula oficial
2. **‚úÖ Tratamento de Medidas N√£o Respondidas**: Consideradas como peso 0
3. **‚úÖ Exclus√£o de "N√£o se aplica"**: Removidas do denominador conforme especifica√ß√£o
4. **‚úÖ Diferentes Escalas por Diagn√≥stico**: Sim/N√£o para Diagn√≥stico 1, escala completa para 2 e 3
5. **‚úÖ Multiplicador INCC**: Aplicado corretamente conforme capacidade do controle
6. **‚úÖ Divis√£o por 2**: Implementada conforme f√≥rmula oficial

---

## üìù **5. EXEMPLO PR√ÅTICO**

### **Avalia√ß√£o do Controle 0 ‚Äì Estrutura B√°sica**

| **Medida** | **N√≠vel de Implementa√ß√£o** | **‚àëPMC** | **QMC** | **QMNAC** | **N√≠vel de Capacidade** | **iNCC** |
|------------|---------------------------|----------|---------|-----------|------------------------|----------|
| Medida 0.1 | Atendido (1) | | | | | |
| Medida 0.2 | N√£o Atendido (0) | | | | | |
| Medida 0.3 | Atendido (1) | 3,00 | 7 | 0 | N√≠vel 2 | 40 |
| Medida 0.4 | Atendido (1) | | | | | |
| Medida 0.5 | N√£o Atendido (0) | | | | | |
| Medida 0.6 | N√£o Atendido (0) | | | | | |
| Medida 0.7 | N√£o Atendido (0) | | | | | |

**Aplicando a f√≥rmula:**
```
iMC = (3,00 / (7-0)) / 2 * (1 + 40/100)
    = (3,00 / 7) / 2 * (1 + 40/100)
    = (0,43 / 2) * (1 + 40/100)
    = 0,21 * (1 + 40/100)
    = 0,21 * 1,40
    = 0,30
```

**Resultado**: O indicador de maturidade do Controle 0 seria **0,30** ou n√≠vel de maturidade **B√°sico**.

---

## üîß **6. VALIDA√á√ÉO E CONFORMIDADE**

### **6.1 Pontos de Conformidade Verificados**

- ‚úÖ **F√≥rmula de c√°lculo**: Implementada exatamente conforme especifica√ß√£o oficial
- ‚úÖ **Tabelas de pontua√ß√£o**: Todas as tabelas (2, 3, 4, 5 e 6) implementadas corretamente
- ‚úÖ **Peso do Controle 0**: Multiplicado por 4 nas f√≥rmulas de iSeg e iPriv
- ‚úÖ **Tratamento de "N√£o se aplica"**: Exclu√≠do corretamente dos c√°lculos
- ‚úÖ **N√≠veis INCC**: Implementados conforme tabela oficial
- ‚úÖ **Classifica√ß√£o de maturidade**: Faixas implementadas conforme especifica√ß√£o

### **6.2 Melhorias Implementadas**

1. **Corre√ß√£o do c√°lculo de medidas n√£o respondidas**: Agora s√£o consideradas como peso 0
2. **Sincroniza√ß√£o de dados**: Interface reflete mudan√ßas instantaneamente
3. **Cache inteligente**: Evita rec√°lculos desnecess√°rios
4. **Valida√ß√£o de dados**: Garante integridade dos c√°lculos

---

## üìö **7. REFER√äNCIAS**

- **Guia do Framework de Privacidade e Seguran√ßa da Informa√ß√£o** (Documento oficial)
- **Tabelas 2, 3, 4, 5 e 6** do Framework oficial
- **F√≥rmulas oficiais** para c√°lculo de iMC, iSeg e iPriv
- **Implementa√ß√£o t√©cnica** em `src/lib/utils/calculations.ts`

---

## üìã **8. CONTROLE DE VERS√ÉO**

| **Vers√£o** | **Data** | **Altera√ß√µes** |
|------------|----------|----------------|
| 1.0 | 2024-01-XX | Documenta√ß√£o inicial baseada no guia oficial |
| 1.1 | 2024-01-XX | Corre√ß√µes de conformidade com framework |
| 1.2 | 2024-01-XX | Valida√ß√£o completa da implementa√ß√£o |

---

**üìå Nota**: Esta documenta√ß√£o garante que a implementa√ß√£o do sistema FPSI est√° em total conformidade com a metodologia oficial do Framework de Privacidade e Seguran√ßa da Informa√ß√£o, proporcionando avalia√ß√µes precisas e confi√°veis da maturidade organizacional.
